#!/usr/bin/env bash

set -euo pipefail

if [[ $(uname -s) != "Darwin" ]]; then
  echo "capslock-control-swap is only supported on macOS." >&2
  exit 0
fi

hidutil property --set '{
  "UserKeyMapping": [
    { "HIDKeyboardModifierMappingSrc": 0x700000039, "HIDKeyboardModifierMappingDst": 0x7000000E0 },
    { "HIDKeyboardModifierMappingSrc": 0x7000000E0, "HIDKeyboardModifierMappingDst": 0x700000039 }
  ]
}'
